<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizzatore Mesh 3D</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/TrackballControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/FirstPersonControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/FlyControls.js"></script>
    

    <style>
        body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
        #info { position: absolute; top: 10px; left: 10px; color: white; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div id="info">
        POV: <span id="pov"></span><br>
        POV Vector: <span id="povVector"></span><br>
        Up Vector: <span id="upVector"></span>
        <div id="rotationControls" style="position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; color: white;">
            <label for="slider-x">Rotazione X:</label>
            <input type="range" id="slider-x" min="-180" max="180" value="0" style="width: 100px;"><br>
        
            <label for="slider-y">Rotazione Y:</label>
            <input type="range" id="slider-y" min="-180" max="180" value="0" style="width: 100px;"><br>
        
            <label for="slider-z">Rotazione Z:</label>
            <input type="range" id="slider-z" min="-180" max="180" value="0" style="width: 100px;">
        </div>
    </div>

    
    <script>
      // Creazione scena, camera e renderer
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Aggiungiamo una luce ambientale
const light = new THREE.AmbientLight(0xffffff, 1);
scene.add(light);

// Creiamo un piano come riferimento
const planeGeometry = new THREE.PlaneGeometry(50, 50);
const planeMaterial = new THREE.MeshStandardMaterial({ color: 0x808080, side: THREE.DoubleSide });
const plane = new THREE.Mesh(planeGeometry, planeMaterial);
plane.rotation.x = -Math.PI / 2;
scene.add(plane);

// Creiamo un cubo per riferimento
const cubeGeometry = new THREE.BoxGeometry();
const cubeMaterial = new THREE.MeshStandardMaterial({ color: 0xff0000 });
const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
cube.position.set(0, 1, 0);
scene.add(cube);

// Posizioniamo la camera
camera.position.set(0, 5, 10);

const controls = new THREE.FirstPersonControls(camera, renderer.domElement);
controls.lookSpeed = 0.1; // Velocità di rotazione della testa
controls.movementSpeed = 5; // Velocità di movimento
controls.noFly = true; // Imposta su true se vuoi solo movimento a terra
controls.lookVertical = true; // Permette di guardare su/giù
// Aggiungiamo un clock per calcolare il delta time
const clock = new THREE.Clock();

function createRotationSliders(object) {
    // Creazione del contenitore per gli slider
    const controlsDiv = document.createElement('div');
    controlsDiv.id = 'rotationControls';
    controlsDiv.style.position = 'absolute';
    controlsDiv.style.bottom = '10px';
    controlsDiv.style.left = '10px';
    controlsDiv.style.background = 'rgba(0,0,0,0.5)';
    controlsDiv.style.padding = '10px';
    controlsDiv.style.borderRadius = '5px';
    controlsDiv.style.color = 'white';

    document.body.appendChild(controlsDiv);

    ['X', 'Y', 'Z'].forEach(axis => {
        // Creazione dell'etichetta
        const label = document.createElement('label');
        label.innerText = `Rotazione ${axis}: `;

        // Creazione dello slider
        const slider = document.createElement('input');
        slider.type = 'range';
        slider.min = -180;
        slider.max = 180;
        slider.value = 0;
        slider.id = `slider-${axis.toLowerCase()}`;
        slider.style.width = '100px';

        // Evento per aggiornare la rotazione
        slider.addEventListener('input', () => {
            object.rotation[axis.toLowerCase()] = THREE.MathUtils.degToRad(slider.value);
        });

        // Aggiunta degli elementi al contenitore
        controlsDiv.appendChild(label);
        controlsDiv.appendChild(slider);
        controlsDiv.appendChild(document.createElement('br'));
    });
}


// Animazione
function animate() {
    requestAnimationFrame(animate);
    const delta = clock.getDelta(); // Calcola il tempo trascorso tra i frame
    controls.update(delta);
    renderer.render(scene, camera);
    createRotationSliders(cube);
}
animate();

// Gestione del ridimensionamento della finestra
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});


    </script>
</body>
</html>
